<div class="min-h-screen bg-gradient-to-br from-[#1D76D2] to-[#F5F7FB] flex items-center justify-center p-0 overflow-hidden">
  <div class="bg-white/50 backdrop-blur-lg rounded-xl shadow-lg p-6 w-full max-w-md sm:max-w-md md:max-w-md">
    <div class="text-center relative">
      <img class="mx-auto max-h-24 w-auto scale-100 mb-[-8px]" src="/guacurari_tech.png" alt="GuacurariShop">
      <h2 class="text-lg font-bold text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text pb-1">
        Regístrate en GuacuShop
      </h2>
    </div>

    <ng-container *ngIf="rubros.length > 0">
      <form [formGroup]="registerForm" (ngSubmit)="registerCliente()" class="space-y-[1rem] mt-3" autocomplete="off">

        <!-- Campos fake para prevenir autocompletado -->
        <div style="display: none;">
          <input type="text" name="username">
          <input type="password" name="password">
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-xs font-medium text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
            Correo electrónico
          </label>
          <div class="mt-1.5 flex items-center">
            <span class="material-symbols-outlined mr-1.5 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">person</span>
            <input
              type="email"
              id="email"
              formControlName="email"
              required
              autocomplete="new-email"
              class="block w-full rounded-md bg-white px-3 py-2 text-sm text-gray-900 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none"
            />
          </div>
          <span class="text-red-600 text-xs min-h-[1.2rem] block">
            <span *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || submitted)">
              <span *ngIf="registerForm.get('email')?.errors?.['required']">El correo es obligatorio.</span>
              <span *ngIf="registerForm.get('email')?.errors?.['email']">
                Formato inválido. Debe ser ejemplo&#64;dominio.com
              </span>
            </span>
          </span>
        </div>

        <!-- Usuario -->
        <div>
          <label for="registerUsername" class="block text-xs font-medium text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
            Nombre de usuario
          </label>
          <div class="mt-1.5 flex items-center">
            <span class="material-symbols-outlined mr-1.5 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">badge</span>
            <input
              type="text"
              id="registerUsername"
              formControlName="registerUsername"
              required
              autocomplete="new-username"
              class="block w-full rounded-md bg-white px-3 py-2 text-sm text-gray-900 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none"
            />
          </div>
          <span class="text-red-600 text-xs min-h-[1.2rem] block">
            <span *ngIf="registerForm.get('registerUsername')?.invalid && (registerForm.get('registerUsername')?.touched || submitted)">
              El nombre de usuario es obligatorio.
            </span>
          </span>
        </div>

        <!-- Teléfono -->
        <div>
          <label for="telefono" class="block text-xs font-medium text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
            Teléfono
          </label>
          <div class="mt-1.5 flex items-center">
            <span class="material-symbols-outlined mr-1.5 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">call</span>
            <input
              type="tel"
              id="telefono"
              formControlName="telefono"
              required
              class="block w-full rounded-md bg-white px-3 py-2 text-sm text-gray-900 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none"
            />
          </div>
          <span class="text-red-600 text-xs min-h-[1.2rem] block">
            <span *ngIf="registerForm.get('telefono')?.invalid && (registerForm.get('telefono')?.touched || submitted)">
              <span *ngIf="registerForm.get('telefono')?.errors?.['required']">Teléfono obligatorio.</span>
              <span *ngIf="registerForm.get('telefono')?.errors?.['pattern']">Solo números.</span>
            </span>
          </span>
        </div>

        <!-- Contraseña -->
        <div>
          <label for="registerPassword" class="block text-xs font-medium text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
            Contraseña
          </label>
          <div class="mt-1.5 flex items-center relative">
            <span class="material-symbols-outlined mr-1.5 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">passkey</span>
            <input
              [type]="passwordVisible ? 'text' : 'password'"
              id="registerPassword"
              formControlName="registerPassword"
              required
              autocomplete="new-password"
              class="block w-full rounded-md bg-white px-3 py-2 text-sm text-gray-900 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none pr-10"
            />
            <span
              (click)="togglePasswordVisibility()"
              class="material-symbols-outlined cursor-pointer absolute right-2 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
              {{ passwordVisible ? 'visibility' : 'visibility_off' }}
            </span>
          </div>
          <span class="text-red-600 text-xs min-h-[1.2rem] block">
            <span *ngIf="registerForm.get('registerPassword')?.invalid && (registerForm.get('registerPassword')?.touched || submitted)">
              <span *ngIf="registerForm.get('registerPassword')?.errors?.['required']">Contraseña obligatoria.</span>
              <span *ngIf="registerForm.get('registerPassword')?.errors?.['pattern']">
                8 caracteres con mayúscula, minúscula, número y símbolo.
              </span>
            </span>
          </span>
        </div>
        
        <!-- Rubro -->
        <div>
          <label for="rubro" class="block text-xs font-medium text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">
            Rubro
          </label>
          <div class="mt-1.5 flex items-center">
            <span class="material-symbols-outlined mr-1.5 text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text">category</span>
            <select id="rubro" formControlName="rubro" required
              class="block w-full rounded-md bg-white px-3 py-2 text-sm text-gray-900 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 focus:outline-none">
              <option *ngFor="let item of rubros" [value]="item">{{ item }}</option>
            </select>
          </div>
        </div>

        <!-- Botón -->
        <div>
          <button type="submit"
            class="w-full flex justify-center items-center rounded-md bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] shadow-md text-sm font-semibold text-white hover:shadow-lg hover:shadow-purple-500/40 active:opacity-[0.85] px-4 py-2 h-9 mt-2">
            <span *ngIf="!isLoading">Registrarse</span>
            <div *ngIf="isLoading" class="animate-spin w-4 h-4 border-3 border-t-transparent border-white rounded-full"></div>
          </button>
        </div>
      </form>
    </ng-container>

    <p class="mt-5 text-center text-xs text-gray-500">
      ¿Ya estás registrado?
      <a [routerLink]="['/auth/login']" class="font-semibold text-transparent bg-gradient-to-r from-[#9B59B6] to-[#1D76D2] bg-clip-text hover:opacity-80">
        Inicia sesión
      </a>
    </p>
  </div>
</div>